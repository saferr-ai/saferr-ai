---
import Layout from '../layouts/Layout.astro';
import PersonCard from '../components/PersonCard.astro';

import { people } from '../lib/data';

// Group people by their role
const faculty = people.filter(person => person.role === 'faculty');
const staff = people.filter(person => person.role === 'staff');
const phd = people.filter(person => person.role === 'phd');
const masters = people.filter(person => person.role === 'masters');
const undergrad = people.filter(person => person.role === 'undergrad');
const alumni = people.filter(person => person.role === 'alumni');
const collaborators = people.filter(person => person.role === 'collaborator');
const postdocs = people.filter(person => person.role === 'postdoc');

// Define types for the social links
interface SocialLink {
  url: string;
  type: 'website' | 'github' | 'twitter' | 'linkedin' | 'scholar' | 'email';
}

// Helper function to prepare social media links data
const getSocialLinks = (person: any): SocialLink[] => {
  const links: SocialLink[] = [];
  
  if (person.website) {
    links.push({ url: person.website, type: 'website' });
  }
  
  if (person.github) {
    links.push({ url: person.github, type: 'github' });
  }
  
  if (person.twitter) {
    links.push({ url: person.twitter, type: 'twitter' });
  }
  
  if (person.linkedin) {
    links.push({ url: person.linkedin, type: 'linkedin' });
  }
  
  if (person.scholar) {
    links.push({ url: person.scholar, type: 'scholar' });
  }
  
  if (person.email) {
    links.push({ url: `mailto:${person.email}`, type: 'email' });
  }
  
  return links;
};

// Type for person
interface Person {
  name: string;
  title: string;
  bio: string;
  image: string;
  interests: string[];
  email?: string;
  role: string;
  [key: string]: any;
}
---

<Layout title="People - SAFERR AI Lab">
  <div class="container mx-auto px-4 py-12">
    <div class="text-center mb-12">
      <h1 class="text-4xl font-bold mb-4">Our Team</h1>
      <p class="text-lg max-w-3xl mx-auto">
        Meet the researchers, faculty, and students working at the SAFERR AI Lab to advance safe, reliable, and robust AI systems.
      </p>
    </div>
    
    {faculty.length > 0 && (
      <div class="mb-12">
        <h2 class="text-2xl font-bold mb-6 border-b pb-2">Faculty</h2>
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          {faculty.map(person => <PersonCard person={person} />)}
        </div>
      </div>
    )}
    
    {staff.length > 0 && (
      <div class="mb-12">
        <h2 class="text-2xl font-bold mb-6 border-b pb-2">Research Staff</h2>
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          {staff.map(person => <PersonCard person={person} />)}
        </div>
      </div>
    )}
    
    {phd.length > 0 && (
      <div class="mb-12">
        <h2 class="text-2xl font-bold mb-6 border-b pb-2">PhD Students</h2>
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          {phd.map(person => <PersonCard person={person} />)}
        </div>
      </div>
    )}
    
    {masters.length > 0 && (
      <div class="mb-12">
        <h2 class="text-2xl font-bold mb-6 border-b pb-2">Masters Students</h2>
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          {masters.map(person => <PersonCard person={person} />)}
        </div>
      </div>
    )}
    
    {undergrad.length > 0 && (
      <div class="mb-12">
        <h2 class="text-2xl font-bold mb-6 border-b pb-2">Undergraduate Researchers</h2>
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          {undergrad.map(person => <PersonCard person={person} />)}
        </div>
      </div>
    )}
    
    {alumni.length > 0 && (
      <div>
        <h2 class="text-2xl font-bold mb-6 border-b pb-2">Alumni</h2>
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          {alumni.map(person => <PersonCard person={person} />)}
        </div>
      </div>
    )}

    {postdocs.length > 0 && (
      <div>
        <h2 class="text-2xl font-bold mb-6 border-b pb-2">Postdocs</h2>
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          {postdocs.map(person => <PersonCard person={person} />)}
        </div>
      </div>
    )}
    
    {collaborators.length > 0 && (
      <div>
        <h2 class="text-2xl font-bold mb-6 border-b pb-2">Collaborators</h2>
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          {collaborators.map(person => <PersonCard person={person} />)}
        </div>
      </div>
    )}

  </div>
</Layout> 